<!DOCTYPE html>
<html>
  <head>
    <title>Advanced Functions</title>
  </head>
  <body>
    <button onclick="" class="js-button">Click</button>

    <script>
//////////////////////////////////////////////////////////////////////////////////
// 1. Event listener as arrow function
//////////////////////////////////////////////////////////////////////////////////
const buttonElement = document.querySelector('.js-button');
      const eventListener = () => {
        console.log('click1');
      };
      buttonElement.addEventListener('click', eventListener);


//////////////////////////////////////////////////////////////////////////////////
// 2. Arrow function directly in .addEventListener() call
//////////////////////////////////////////////////////////////////////////////////
buttonElement.removeEventListener('click', eventListener);

      // Bad idea - cannot remove this
      buttonElement.addEventListener('click', () => {
        console.log('click2');
      });

      // How would this be removed?  Does not work.
      buttonElement.removeEventListener('click', () => {
        console.log('click2');
      });

// You can use an arrow function directly as a callback in removeEventListener, but it won’t work as expected.
// This is because removeEventListener requires a reference to the exact same function that was passed to 
// addEventListener. When you use an arrow function directly, you’re creating a new function each time, so the 
// references won’t match.

       const handleClick = () => {
         console.log('click2');
       };
       buttonElement.addEventListener('click', handleClick);
       // This will work because the function reference is the same
       buttonElement.removeEventListener('click', handleClick);


//////////////////////////////////////////////////////////////////////////////////
// 3. A function variable set to an anonymous fcn
//////////////////////////////////////////////////////////////////////////////////
const function1 = function() { console.log('hello2'); };
      console.log(function1);
      console.log(typeof function1);
      function1();


//////////////////////////////////////////////////////////////////////////////////
// 4. An object with a function member
//////////////////////////////////////////////////////////////////////////////////
const object1 = {
        num: 2,
        fun: function() { console.log('hello3'); }
      };
      object1.fun(); //hello3


//////////////////////////////////////////////////////////////////////////////////
// 5. Function that takes a fcn and runs it
//    These do use the function keyword and are not arrow functions
//////////////////////////////////////////////////////////////////////////////////
function run(param) {
        param();
      }

      // Calling the above fcn passing a regular function
      run(function() { console.log('hello4'); });

      // setTimeout takes an anonymous function and a timeout value
      // In this case the system will wait 3 seconds then log 'timeout' 'timeout2'
      setTimeout(function() { console.log('timeout');  console.log('timeout2'); }, 3000);
      console.log('next line');

      // setInterval takes an anonymous function and a timeout value
      // In this case the system will log "interval" every 3 seconds
      setInterval(function() { console.log('interval'); }, 3000);
      console.log('next line 2');

//////////////////////////////////////////////////////////////////////////////////
// 6. skipping an iteration of .forEach
//////////////////////////////////////////////////////////////////////////////////

[
    'make dinner',
    'wash dishes',
    'watch youtube'
].forEach((value, index) => {
    if (value === 'wash dishes') {
        return; // This will skip the current iteration
    }

    console.log(index);
    console.log(value);
});

//////////////////////////////////////////////////////////////////////////////////
// 7. Setting a function variable to an unnamed regular function
//////////////////////////////////////////////////////////////////////////////////

      const regularFunction = function(param, param2) {
        console.log('hello');
        return 5;
      };

//////////////////////////////////////////////////////////////////////////////////
// 8. Setting a function variable to an (unnamed) arrow function
//////////////////////////////////////////////////////////////////////////////////

      const arrowFunction = (param, param2) => {
        console.log('hello');
        return 5;
      };
      arrowFunction();    // If param or param2 not provided they are undefined
      arrowFunction(1,2);


//////////////////////////////////////////////////////////////////////////////////
// 9. Setting a function variable to an (unnamed) arrow function w/1 param
//    No parenthesis required around param
//////////////////////////////////////////////////////////////////////////////////

      const oneParam = param => {
        console.log(param + 1);
      };
      oneParam(2);


//////////////////////////////////////////////////////////////////////////////////
// 10. One-line anonymous function
//////////////////////////////////////////////////////////////////////////////////

const oneLine = () => 2 + 3;
      console.log(oneLine());

//////////////////////////////////////////////////////////////////////////////////
// 11. .filter array function
//////////////////////////////////////////////////////////////////////////////////

console.log([1, -3, 5].filter((value, index) => {
        return value >= 0;
      }));

//////////////////////////////////////////////////////////////////////////////////
// 12. .map array function
//////////////////////////////////////////////////////////////////////////////////

console.log([1, 1, 3].map((value, index) => {
        // return does not return from function but moves on to next array index
        return value * 2;
      }));

// Simplification - Omit the blue curly brackets and the word "return"
console.log([1, 1, 3].map(value => value * 2));

    </script>
  </body>
</html>