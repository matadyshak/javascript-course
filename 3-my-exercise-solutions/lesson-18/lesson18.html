<!DOCTYPE html>
<html>
  <head>
    <title>Lesson 18</title>
  </head>
  <body>
    <script>

      //Works in the debugger      
      function requestGreeting() {
        const xhr = new XMLHttpRequest();

        xhr.addEventListener('load', () => {
        console.log(xhr.response);
        }); //addEventListener()

        xhr.addEventListener('error', (error) => {
          console.log(`Unexpected error.  Please try again later. Error code: ${error}`);
        });
  
        xhr.open('GET', 'https://supersimplebackend.dev/greeting');
        xhr.send();
      }

      //Gets error in the debugger at return response.text();
      //That is because response.text was also in the watch window
      function requestGreetingFetch() {
        fetch('https://supersimplebackend.dev/greeting')

          .then((response) => {
            return response.text(); //Error: Body stream already read
          })
                  
          .then((text) => {
            console.log(text);
          })

          .catch((error) => {
            console.log(`Unexpected error.  Please try again later. Error code: ${error}`);
            console.error('Error:', error);
          });

        return;
      }
      
      requestGreeting();
      requestGreetingFetch();
    </script>
  </body>
</html> 